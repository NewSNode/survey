<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="../templates/masterLayout.xhtml">
	<ui:define name="title">#{messages.files}</ui:define>
	<ui:define name="content">
		<f:view>
			<p:panel header="#{messages.files}">
		<!-- primefaces -->
<!-- 			<h:form enctype="multipart/form-data"> -->
<!-- 				<p:growl id="messages" showDetail="true" /> -->
<!-- 				<p:fileUpload value="#{fileUploadBean.file}" mode="simple" -->
<!-- 					disabled="true" /> -->
<!-- 				<p:commandButton value="Submit" ajax="false" -->
<!-- 					actionListener="#{fileUploadBean.upload}" disabled="true" /> -->
<!-- 			</h:form> -->

	<!-- jsf 2.2 -->
				<h:form id="form" enctype="multipart/form-data">
					<h:outputText value="Choose file to upload" />
					<h:inputFile id="file" value="#{fileUploadBean.file}" />
					<h:commandButton value="Upload" action="#{fileUploadBean.upload}" />
				</h:form>

	<!-- richfaces -->
<!-- 				<h:form id="openUploadDialogForm"> -->
<!-- 					<h:commandButton id="openUploadDialog" value="Upload file"> -->
<!-- 						<p:componentControl target="popup" operation="show" /> -->
<!-- 					</h:commandButton> -->
<!-- 				</h:form> -->
				<h:form id="fileTableForm">
					<p:dataTable value="#{filesBean.files}" var="file"
						id="fileTable">
						<p:column sortBy="#{file.filename}" id="filename">
							<f:facet name="header">
								<h:outputText value="#{messages.filename}" />
							</f:facet>
							<h:outputText value="#{file.filename}" />
						</p:column>
						<p:column sortBy="#{file.mimeType}" id="mimeType">
							<f:facet name="header">
								<h:outputText value="#{messages.mimeType}" />
							</f:facet>
							<h:outputText value="#{file.mimeType}" />
						</p:column>
						<p:column sortBy="#{file.createTime}" id="createTime">
							<f:facet name="header">
								<h:outputText value="#{messages.createTime}" />
							</f:facet>
							<h:outputText value="#{file.createTime}" />
						</p:column>
						<p:column sortBy="#{file.size}" id="size">
							<f:facet name="header">
								<h:outputText value="#{messages.size}" />
							</f:facet>
							<h:outputText value="#{file.size}" />
						</p:column>
						<p:column sortBy="#{file.owner}" id="owner">
							<f:facet name="header">
								<h:outputText value="#{messages.owner}" />
							</f:facet>
							<h:outputText value="#{file.owner}" />
						</p:column>
						<p:column sortBy="#{file.url}" id="url">
							<f:facet name="header">
								<h:outputText value="#{messages.url}" />
							</f:facet>
							<h:outputText value="#{file.url}" />
						</p:column>
						<p:column id="preview">
							<f:facet name="header">
								<h:outputText value="#{messages.preview}" />
							</f:facet>
							<p:graphicImage value="#{filesBean.image}" width="50px" height="50px">
								<f:param name="id" value="#{file.id}" />
							</p:graphicImage>
<!-- 							<a4j:mediaOutput element="img" cacheable="false" session="false" -->
<!-- 								createContent="#{filesBean.paint}" value="#{file.id}" -->
<!-- 								style="width:50px; height:50px;" mimeType="image/jpeg" /> -->
						</p:column>
					</p:dataTable>
					<a4j:poll interval="20000" render="fileTable" />
				</h:form>
				<h:form id="files">
					<h:outputLink id="logout"
						value="#{request.contextPath}/j_spring_security_logout">#{messages.logout}</h:outputLink>
				</h:form>
			</p:panel>
		</f:view>
<!-- 		<p:popupPanel id="popup" modal="true" autosized="true" -->
<!-- 			resizeable="false" moveable="false"> -->
<!-- 			<f:facet name="header"> -->
<!-- 				<h:outputText value="#{messages.fileUpload}" /> -->
<!-- 			</f:facet> -->
<!-- 			<f:facet name="controls"> -->
<!-- 				<h:outputLink id="close" value="#" -->
<!-- 					onclick="#{p:component('popup')}.hide(); return false;"> -->
<!-- 					<h:outputText value="X" /> -->
<!-- 				</h:outputLink> -->
<!-- 			</f:facet> -->
<!-- 			<h:form id="fileUploadForm"> -->
<!-- 				<p:fileUpload id="upload" -->
<!-- 					fileUploadListener="#{fileUploadBean.uploadFile}" -->
<!-- 					acceptedTypes="#{fileUploadBean.acceptedTypes}" -->
<!-- 					maxFilesQuantity="10" -->
<!-- 					onuploadcomplete="#{p:component('popup')}.hide(); return true;"> -->
<!-- 					<a4j:ajax event="uploadcomplete" execute="@none" -->
<!-- 						render="fileTableForm" /> -->
<!-- 				</p:fileUpload> -->
<!-- 				<h:commandButton id="done" value="#{messages.cancel}" -->
<!-- 					onclick="#{p:component('popup')}.hide(); return false;" /> -->
<!-- 			</h:form> -->
<!-- 		</p:popupPanel> -->
	</ui:define>
</ui:composition>
